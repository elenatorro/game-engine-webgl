<html>
<head>
<title>Aubengine</title>
<meta http-equiv='content-type' content='text/html; charset=ISO-8859-1'>
<link href='assets/styles/style.css'   type='text/css' rel='stylesheet'>

<script type='text/javascript' src='dist/dependencies.js'></script>
<script type='text/javascript' src='dist/Aubengine.js'></script>

<script type="text/javascript">
/* Main Script */
var aubengine;
function runShowRoom(){
    aubengine = new Aubengine("the-canvas");
    aubengine.setUpEnvironment();
    //add main camera
    var camera = aubengine.createCamera('main',[0.0,0.4,7],[0.0,0.0,0.0],25,-11);

    //add main four lights
    var fleft  = aubengine.createLight('fleft', [-25,25,-25],[0.4,0.4,0.4],[0.0,0.0,0.0],[0.8,0.8,0.8]);
    var fright = aubengine.createLight('fright',[ 25,25,-25 ] ,[0.4,0.4,0.4],[0.0,0.0,0.0],[0.8,0.8,0.8]);
    var nleft  = aubengine.createLight('nleft', [-25,25, 25 ],[0.4,0.4,0.4],[0.0,0.0,0.0],[0.8,0.8,0.8]);
    var nright = aubengine.createLight('nright',[ 25,25, 25  ],[0.4,0.4,0.4],[0.0,0.0,0.0],[0.8,0.8,0.8]);

    var mesh = aubengine.createMesh('models/geometry/simpleCube.json', 'cube');

    //scene tree
    var cameraNode = aubengine.createNode(camera);
    aubengine.addNode(aubengine.getRoot(), cameraNode);

    var fleftNode = aubengine.createNode(fleft);
    aubengine.addNode(aubengine.getRoot(), fleftNode);

    var frightNode = aubengine.createNode(fright);
    aubengine.addNode(aubengine.getRoot(), frightNode);

    var nlefNode = aubengine.createNode(nleft);
    aubengine.addNode(aubengine.getRoot(), nlefNode);

    var nrightNode = aubengine.createNode(nright);
    aubengine.addNode(aubengine.getRoot(), nrightNode);

    var meshNode = aubengine.createNode(mesh);
    aubengine.addNode(aubengine.getRoot(), meshNode);

    //first tree -> save lights and cameras, and load objects
    aubengine.getTree().saveEntities();

    //
    // aubengine.loadProgram(false);
    aubengine.addFloor(false);

    aubengine.addModel('models/geometry/simpleCube.json', 'cube'); //provisional, will turn into createMesh
    aubengine.addModel('models/sphere.json', 'ball');

    //after drawing
    aubengine.setMainCamera(camera);
    aubengine.draw();
  }
</script>

<script type="text/javascript">

function resizeCanvas(){
    c_width = $('#content').width();
    c_height = $('#content').height();
    $('#the-canvas').attr('width',c_width);
    $('#the-canvas').attr('height',c_height);
}

$(window).resize(function(){resizeCanvas();});
</script>
</head>

<body onLoad='runShowRoom()'>
<div id="header">
    <h1>Aubengine</h1>
    <h2>We love aubergines and engines</h2>
    <button id="draw">draw</button>
</div>

<div id="content">
    <canvas id='the-canvas'></canvas>
</div>

<script type='text/javascript'>resizeCanvas();</script>
<script type='text/javascript'>document.getElementById('draw').addEventListener('click', function(event) {
  aubengine.draw();
});</script>
</body>
</html>
