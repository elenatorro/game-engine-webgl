!function t(e,r,i){function n(s,u){if(!r[s]){if(!e[s]){var h="function"==typeof require&&require;if(!u&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=r[s]={exports:{}};e[s][0].call(a.exports,function(t){var r=e[s][1][t];return n(r?r:t)},a,a.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){"use strict";var i,r;i=function(){function t(t){this.hex=t||"#FFFFFF",this.rgba=this.hex2rgb(this.hex,1),this.vec=null}return t.prototype.hex2rgb=function(t,e){var r=t.replace("#",""),i=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16);return[i/255,n/255,o/255,e]},t.prototype.rgb2hex=function(t){return"#"+("0"+parseInt(t[0],10).toString(16)).slice(-2)+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)},t.prototype.setColorRgba=function(t,e,r,i){this.rgba=[t,e,r,i||1],this.hex=this.rgb2hex(this.rgba),this.vec=vec4(t,e,r,i)},t.prototype.setColorHex=function(t,e){this.hex=t,this.rgba=this.rgba(t,e||1),this.vec=vec4(this.rgba[0],this.rgba[1],this.rgba[2],this.rgba[3])},t.prototype.getHex=function(){return this.hex},t.prototype.getRgba=function(){return this.rgba},t.prototype.getVec=function(){return this.vec},t}(),r=e.exports=i},{}],2:[function(t,e,r){"use strict";var i,r;i=function(){function t(t,e){this.elements=t||[],this.files=e||[]}return t.prototype.beginDraw=function(t){t.forEach(function(t){t.draw()})},t.prototype.endDraw=function(){},t}(),r=e.exports=i},{}],3:[function(t,e,r){"use strict";var i,r,n=t("./Entity");i=function(){function t(t,e,r,i,o,s,u){this.ambient=t||null,this.diffuse=e||null,this.spec=r||null,this.direction=i||null,this.position=o||null,this.intensity=s||null,this.color=u||null,this.prototype=new n}return t.prototype.getColor=function(){return this.color},t.prototype.setLight=function(t,e,r,i,n,o,s){this.ambient=t,this.diffuse=e,this.spec=r,this.direction=i,this.position=n,this.intensity=o,this.color=s},t.prototype.setAmbient=function(t){this.ambbient=t},t.prototype.setDiffuse=function(t){this.ambbient=t},t.prototype.setSpec=function(t){this.ambbient=t},t.prototype.setDirection=function(t){this.ambbient=t},t.prototype.setPosition=function(t){this.ambbient=t},t.prototype.setIntensity=function(t){this.ambbient=t},t.prototype.setColor=function(t){this.ambbient=t},t}(),r=e.exports=i},{"./Entity":2}],4:[function(t,e,r){"use strict";var i,r;i=function(){function t(){var t=Array.prototype.concat.apply([],arguments);t.length||(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.m=e?new Float32Array(t):t}var e="undefined"!=typeof Float32Array;return t.prototype={inverse:function(){return t.inverse(this,new t)},transpose:function(){return t.transpose(this,new t)},multiply:function(e){return t.multiply(this,e,new t)},transformPoint:function(t){var e=this.m;return new Vector(e[0]*t.x+e[1]*t.y+e[2]*t.z+e[3],e[4]*t.x+e[5]*t.y+e[6]*t.z+e[7],e[8]*t.x+e[9]*t.y+e[10]*t.z+e[11]).divide(e[12]*t.x+e[13]*t.y+e[14]*t.z+e[15])},transformVector:function(t){var e=this.m;return new Vector(e[0]*t.x+e[1]*t.y+e[2]*t.z,e[4]*t.x+e[5]*t.y+e[6]*t.z,e[8]*t.x+e[9]*t.y+e[10]*t.z)}},t.inverse=function(e,r){r=r||new t;var i=e.m,n=r.m;n[0]=i[5]*i[10]*i[15]-i[5]*i[14]*i[11]-i[6]*i[9]*i[15]+i[6]*i[13]*i[11]+i[7]*i[9]*i[14]-i[7]*i[13]*i[10],n[1]=-i[1]*i[10]*i[15]+i[1]*i[14]*i[11]+i[2]*i[9]*i[15]-i[2]*i[13]*i[11]-i[3]*i[9]*i[14]+i[3]*i[13]*i[10],n[2]=i[1]*i[6]*i[15]-i[1]*i[14]*i[7]-i[2]*i[5]*i[15]+i[2]*i[13]*i[7]+i[3]*i[5]*i[14]-i[3]*i[13]*i[6],n[3]=-i[1]*i[6]*i[11]+i[1]*i[10]*i[7]+i[2]*i[5]*i[11]-i[2]*i[9]*i[7]-i[3]*i[5]*i[10]+i[3]*i[9]*i[6],n[4]=-i[4]*i[10]*i[15]+i[4]*i[14]*i[11]+i[6]*i[8]*i[15]-i[6]*i[12]*i[11]-i[7]*i[8]*i[14]+i[7]*i[12]*i[10],n[5]=i[0]*i[10]*i[15]-i[0]*i[14]*i[11]-i[2]*i[8]*i[15]+i[2]*i[12]*i[11]+i[3]*i[8]*i[14]-i[3]*i[12]*i[10],n[6]=-i[0]*i[6]*i[15]+i[0]*i[14]*i[7]+i[2]*i[4]*i[15]-i[2]*i[12]*i[7]-i[3]*i[4]*i[14]+i[3]*i[12]*i[6],n[7]=i[0]*i[6]*i[11]-i[0]*i[10]*i[7]-i[2]*i[4]*i[11]+i[2]*i[8]*i[7]+i[3]*i[4]*i[10]-i[3]*i[8]*i[6],n[8]=i[4]*i[9]*i[15]-i[4]*i[13]*i[11]-i[5]*i[8]*i[15]+i[5]*i[12]*i[11]+i[7]*i[8]*i[13]-i[7]*i[12]*i[9],n[9]=-i[0]*i[9]*i[15]+i[0]*i[13]*i[11]+i[1]*i[8]*i[15]-i[1]*i[12]*i[11]-i[3]*i[8]*i[13]+i[3]*i[12]*i[9],n[10]=i[0]*i[5]*i[15]-i[0]*i[13]*i[7]-i[1]*i[4]*i[15]+i[1]*i[12]*i[7]+i[3]*i[4]*i[13]-i[3]*i[12]*i[5],n[11]=-i[0]*i[5]*i[11]+i[0]*i[9]*i[7]+i[1]*i[4]*i[11]-i[1]*i[8]*i[7]-i[3]*i[4]*i[9]+i[3]*i[8]*i[5],n[12]=-i[4]*i[9]*i[14]+i[4]*i[13]*i[10]+i[5]*i[8]*i[14]-i[5]*i[12]*i[10]-i[6]*i[8]*i[13]+i[6]*i[12]*i[9],n[13]=i[0]*i[9]*i[14]-i[0]*i[13]*i[10]-i[1]*i[8]*i[14]+i[1]*i[12]*i[10]+i[2]*i[8]*i[13]-i[2]*i[12]*i[9],n[14]=-i[0]*i[5]*i[14]+i[0]*i[13]*i[6]+i[1]*i[4]*i[14]-i[1]*i[12]*i[6]-i[2]*i[4]*i[13]+i[2]*i[12]*i[5],n[15]=i[0]*i[5]*i[10]-i[0]*i[9]*i[6]-i[1]*i[4]*i[10]+i[1]*i[8]*i[6]+i[2]*i[4]*i[9]-i[2]*i[8]*i[5];for(var o=i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12],s=0;16>s;s++)n[s]/=o;return r},t.transpose=function(e,r){r=r||new t;var i=e.m,n=r.m;return n[0]=i[0],n[1]=i[4],n[2]=i[8],n[3]=i[12],n[4]=i[1],n[5]=i[5],n[6]=i[9],n[7]=i[13],n[8]=i[2],n[9]=i[6],n[10]=i[10],n[11]=i[14],n[12]=i[3],n[13]=i[7],n[14]=i[11],n[15]=i[15],r},t.multiply=function(e,r,i){i=i||new t;var n=e.m,o=r.m,s=i.m;return s[0]=n[0]*o[0]+n[1]*o[4]+n[2]*o[8]+n[3]*o[12],s[1]=n[0]*o[1]+n[1]*o[5]+n[2]*o[9]+n[3]*o[13],s[2]=n[0]*o[2]+n[1]*o[6]+n[2]*o[10]+n[3]*o[14],s[3]=n[0]*o[3]+n[1]*o[7]+n[2]*o[11]+n[3]*o[15],s[4]=n[4]*o[0]+n[5]*o[4]+n[6]*o[8]+n[7]*o[12],s[5]=n[4]*o[1]+n[5]*o[5]+n[6]*o[9]+n[7]*o[13],s[6]=n[4]*o[2]+n[5]*o[6]+n[6]*o[10]+n[7]*o[14],s[7]=n[4]*o[3]+n[5]*o[7]+n[6]*o[11]+n[7]*o[15],s[8]=n[8]*o[0]+n[9]*o[4]+n[10]*o[8]+n[11]*o[12],s[9]=n[8]*o[1]+n[9]*o[5]+n[10]*o[9]+n[11]*o[13],s[10]=n[8]*o[2]+n[9]*o[6]+n[10]*o[10]+n[11]*o[14],s[11]=n[8]*o[3]+n[9]*o[7]+n[10]*o[11]+n[11]*o[15],s[12]=n[12]*o[0]+n[13]*o[4]+n[14]*o[8]+n[15]*o[12],s[13]=n[12]*o[1]+n[13]*o[5]+n[14]*o[9]+n[15]*o[13],s[14]=n[12]*o[2]+n[13]*o[6]+n[14]*o[10]+n[15]*o[14],s[15]=n[12]*o[3]+n[13]*o[7]+n[14]*o[11]+n[15]*o[15],i},t.identity=function(e){e=e||new t;var r=e.m;return r[0]=r[5]=r[10]=r[15]=1,r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=r[12]=r[13]=r[14]=0,e},t.perspective=function(e,r,i,n,o){var s=Math.tan(e*Math.PI/360)*i,u=s*r;return t.frustum(-u,u,-s,s,i,n,o)},t.frustum=function(e,r,i,n,o,s,u){u=u||new t;var h=u.m;return h[0]=2*o/(r-e),h[1]=0,h[2]=(r+e)/(r-e),h[3]=0,h[4]=0,h[5]=2*o/(n-i),h[6]=(n+i)/(n-i),h[7]=0,h[8]=0,h[9]=0,h[10]=-(s+o)/(s-o),h[11]=-2*s*o/(s-o),h[12]=0,h[13]=0,h[14]=-1,h[15]=0,u},t.ortho=function(e,r,i,n,o,s,u){u=u||new t;var h=u.m;return h[0]=2/(r-e),h[1]=0,h[2]=0,h[3]=-(r+e)/(r-e),h[4]=0,h[5]=2/(n-i),h[6]=0,h[7]=-(n+i)/(n-i),h[8]=0,h[9]=0,h[10]=-2/(s-o),h[11]=-(s+o)/(s-o),h[12]=0,h[13]=0,h[14]=0,h[15]=1,u},t.scale=function(e,r,i,n){n=n||new t;var o=n.m;return o[0]=e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=i,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,n},t.translate=function(e,r,i,n){n=n||new t;var o=n.m;return o[0]=1,o[1]=0,o[2]=0,o[3]=e,o[4]=0,o[5]=1,o[6]=0,o[7]=r,o[8]=0,o[9]=0,o[10]=1,o[11]=i,o[12]=0,o[13]=0,o[14]=0,o[15]=1,n},t.rotate=function(e,r,i,n,o){if(!e||!r&&!i&&!n)return t.identity(o);o=o||new t;var s=o.m,u=Math.sqrt(r*r+i*i+n*n);e*=Math.PI/180,r/=u,i/=u,n/=u;var h=Math.cos(e),a=Math.sin(e),c=1-h;return s[0]=r*r*c+h,s[1]=r*i*c-n*a,s[2]=r*n*c+i*a,s[3]=0,s[4]=i*r*c+n*a,s[5]=i*i*c+h,s[6]=i*n*c-r*a,s[7]=0,s[8]=n*r*c-i*a,s[9]=n*i*c+r*a,s[10]=n*n*c+h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,o},t.lookAt=function(e,r,i,n,o,s,u,h,a,c){c=c||new t;var f=c.m,p=new Vector(e,r,i),l=new Vector(n,o,s),d=new Vector(u,h,a),y=p.subtract(l).unit(),g=d.cross(y).unit(),m=y.cross(g).unit();return f[0]=g.x,f[1]=g.y,f[2]=g.z,f[3]=-g.dot(p),f[4]=m.x,f[5]=m.y,f[6]=m.z,f[7]=-m.dot(p),f[8]=y.x,f[9]=y.y,f[10]=y.z,f[11]=-y.dot(p),f[12]=0,f[13]=0,f[14]=0,f[15]=1,c},t}(),r=e.exports=i},{}],5:[function(t,e,r){"use strict";var i,r,n=(t("./Entity"),t("./Color"));i=function(){function t(){this.vertices=new Float32Array,this.normals=new Float32Array,this.vertexCoordinates=new Float32Array,this.verticesAndIndices=new Array,this.file="",this.textures=new Array,this.textureUrl=new Array,this.texturePath="",this.textureNum=null,this.textureImage=null,this.texture=null,this.color=new n("#222222")}return t.prototype.setVertices=function(t){this.vertices=t},t.prototype.setNormals=function(t){this.normals=t},t.prototype.setVertexCoordinates=function(t){this.vertexCoordinates=t},t.prototype.setVerticesAndIndices=function(t){this.verticesAndIndices=t},t.prototype.setMesh=function(t){this.vertices=t[0],this.normals=t[1],this.vertexCoordinates=t[2],this.verticesAndIndices=t[3]},t.prototype.getMesh=function(){return[this.vertices,this.normals,this.vertexCoordinates,this.verticesAndIndices]},t.prototype.addIndicesVertices=function(t,e){return t.i_verts.forEach(function(t,r){e.push(r)}),e},t.prototype.startMesh=function(t,e){this.vertices=new Float32Array(K3D.edit.unwrap(t.i_verts,t.c_verts,3)),this.normals=new Float32Array(K3D.edit.unwrap(t.i_norms,t.c_norms,3)),this.vertexCoordinates=new Float32Array(K3D.edit.unwrap(t.i_uvt,t.c_uvt,2)),this.verticesAndIndices=this.addIndicesVertices(t,new Array);var r=this.getMesh();e.push(r)},t.prototype.isAnObj=function(t){return t.indexOf(!1)},t.prototype.isAModel=function(t,e){return e.indexOf(t>=0)},t.prototype.parseModel=function(t,e,r){return r.push(e.file),K3D.parse.fromOBJ(t)},t.prototype.initMesh=function(t,e,r,i){var n=null,o=!1;if(this.isAnObj(e.file))if(this.isAModel(this.file,r))n=this.parseModel(t,e,r);else{o=!0;var s=r.indexOf(e.file),u=i[s];this.setMesh(u)}null==n||o?console.log("The model couldn't be created"):this.startMesh(r,i)},t.prototype.urlLoaded=function(){return this.textures.indexOf(this.textureUrl>=0)},t.prototype.isLoaded=function(t){return this.textures.indexOf(t>=0)},t.prototype.loadImage=function(t,e){this.textureImg=new Image,this.textureImg.src=this.textureUrl,this.textureImg.onload=function(){e.bindImageTexture(t,e.textureImg,e.texture)}},t.prototype.loadTexture=function(t,e){this.urlLoaded()||(this.texture=t.createTexture(),this.loadImage(t,e))},t.prototype.bindImageTexture=function(t,e,r){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),this.saveFiles(e,r)},t.prototype.getTextureFromSrc=function(t){var e=t.split("/");return e[e.lenght-1]},t.prototype.saveFiles=function(t,e){var r=this.getTextureFromSrc(t.src);this.isLoaded(textureImage)&&(this.textures.push(r),this.textureFiles.push([t,e,r])),this.updateNum()},t.prototype.updateNum=function(){this.textureNum=this.textures.indexOf(this.textureImg.src)},t}(),r=e.exports=i},{"./Color":1,"./Entity":2}],6:[function(t,e,r){"use strict";var i,r;i=function(){function t(t,e,r){this.entity=t||"",this.father=e||"",this.children=r||[]}return t.prototype.getFather=function(){return this.father},t.prototype.setFather=function(t){this.father=t},t.prototype.getEntity=function(){return this.entity},t.prototype.setEntity=function(t){this.entity=t},t.prototype.index=function(){return this.isRoot()?void 0:this.father.children.indexOf(this)},t.prototype.isRoot=function(){return""==this.father},t.prototype.childrenNumber=function(){return this.children.length},t.prototype.nextSibling=function(){return!this.isRoot()&&this.hasSibling()?this.father.getChild(this.index()+1):null},t.prototype.hasSibling=function(){return this.father.existsChild(this.father.getChild(this.index()+1))},t.prototype.addChild=function(t){t.setFather(this),this.children.push(t)},t.prototype.newChild=function(){return this.addChild(new t("",this,[]))},t.prototype.getChild=function(t){return this.existsChild(this.children[t])?this.children[t]:null},t.prototype.firstChild=function(){return this.getChild(0)},t.prototype.lastChild=function(){return this.getChild(this.childrenNumber()-1)},t.prototype.removeChild=function(t){this.existsChild(t)?this.children.splice(this.index(),1):!1},t.prototype.removeChildren=function(){this.children=[]},t.prototype["delete"]=function(){this.father.removeChild(this)},t.prototype.existsChild=function(t){return-1!=this.children.indexOf(t)},t.prototype.draw=function(){if(this.entity){var t=this.children;this.entity.beginDraw(t),this.entity.endDraw()}else console.log("There is no entity for this node")},t}(),r=e.exports=i},{}],7:[function(t,e,r){"use strict";{var i,r,n=t("./resource");t("fs")}i=function(){function e(e){this.resources=[],this.path=e||"",this.file=t("fs")}return e.prototype.getResource=function(t){var e=this.searchResource(t);return e||(e=new n(t,""),this.writeResource(e)),e},e.prototype.writeResource=function(t){this.file.appendFileSync(this.path,t.name+"#"+t.data+"\n")},e.prototype.readName=function(t){return t.split("#")[0]},e.prototype.readData=function(t){return t.split("#")[1]},e.prototype.getFileText=function(t){return console.log(this.file),this.path=t,this.file.readFileSync(this.path).toString()},e.prototype.getFileContent=function(){return this.file.readFileSync(this.path).toString().split("\n")},e.prototype.searchResource=function(t){for(var e=this.getFileContent(),r=0;r<e.length;){if(this.readName(e[r])==t)return e[r];r++}return!1},e.prototype.addResource=function(t){this.resources.push(t)},e.prototype.getFile=function(){return this.file},e.prototype.setPath=function(t){this.path=t},e.prototype.getPath=function(){return this.path},e.prototype.readAllResources=function(){var t=null;this.getFileContent().forEach(function(e){t=new n(this.readName(e),this.readData(e)),this.resources.push(t)})},e}(),r=e.exports=i},{"./resource":14,fs:15}],8:[function(t,e,r){"use strict";var i,r,n=t("./NodeTree"),o=t("./Tree"),s=t("./Shader");i=function(){function t(t){this.root=new n,this.tree=new o(this.root),this.matrix=new Array,this.gl=t,this.shader=new s}return t.prototype.setGl=function(t){this.gl=t},t.prototype.getLastMatrix=function(){return this.matrix.length>0?this.matrix[this.matrix.length-1]:null},t.prototype.getMatrix=function(){return this.matrix},t.prototype.getRoot=function(){return this.root},t.prototype.getTree=function(){return this.tree},t}(),r=e.exports=i},{"./NodeTree":6,"./Shader":9,"./Tree":12}],9:[function(t,e,r){"use strict";var i,r;i=function(t){function e(){this.program=null,this.vertices=null,this.indices=null,this.index=null,this.size=null,this.type=null,this.norm=null,this.stride=null,this.offset=null,this.pointer=null,this.vertexBuffer=null,this.indexBuffer=null,this.vertexShader=document.getElementById("vertexShader"),this.fragmentShader=document.getElementById("fragmentShader")}return e.prototype.setProgram=function(t){this.program=t},e.prototype.getVertexShader=function(){return this.vertexShader.innerHTML},e.prototype.getFragmentShader=function(){return this.fragmentShader.innerHTML},e.prototype.getVertices=function(){return this.vertices},e.prototype.getIndices=function(){return this.indices},e.prototype.setVertices=function(t){this.vertices=t},e.prototype.setIndices=function(t){this.indices=t},e.prototype.getVertexBuffer=function(){return this.vertexBuffer},e.prototype.getIndexBuffer=function(){return this.indexBuffer},e.prototype.setBuffers=function(t){t.bindBuffer(t.ARRAY_BUFFER,this.getVertexBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.getVertices()),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.getIndexBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.getIndices()),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},e.prototype.setPointer=function(t){this.pointer=t.vertexAttribPointer(this.index,this.size,this,type,this.norm,this.stride,this.offset)},e.prototype.getPointer=function(){return this.pointer},e.prototype.vertexName=function(){return"x-shader/x-vertex"},e.prototype.fragmentName=function(){return"x-shader/x-fragment"},e.prototype.createShader=function(e){return"VERTEX"==e?t.createShader(t.VERTEX_SHADER):"FRAGMENT"==e?t.createShader(t.FRAGMENT_SHADER):(console.log("Incorrect shader"),null)},e.prototype.checkCompilation=function(t,e){return t.getShaderParameters(e,t.COMPILE_STATUS)?void 0:!1},e.prototype.addShader=function(t,e,r,i){var n=this.createShader(t);return e.shaderSource(n,i),e.compileShader(n),this.checkCompilation(e,n)?void e.attachShader(r,n):e.getShaderInfoLog(n)},e.prototype.initProgram=function(t){var e=null;return null==this.program?(e=t.createProgram(),this.addShader("VERTEX",t,e,this.getVertexShader()),this.addShader("FRAGMENT",t,e,this.getFragmentShader()),t.linkProgram(e),t.useProgram(e),e):this.program},e.prototype.draw=function(t){this.initProgram(t)},e}(),r=e.exports=i},{}],10:[function(t,e,r){"use strict";var i,r;i=function(){function t(){}return t.prototype.vertexContent="const int NUM_LIGHTS = 4;attribute vec3 aVertexPosition;attribute vec3 aVertexNormal;attribute vec4 aVertexColor;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform mat4 uNMatrix;uniform bool uTranslateLights;uniform vec3 uLightPosition[NUM_LIGHTS];varying vec3 vNormal;varying vec3 vLightRay[NUM_LIGHTS];varying vec3 vEye[NUM_LIGHTS];void main(void) {     vec4 c = aVertexColor;     vec4 vertex = uMVMatrix * vec4(aVertexPosition, 1.0);     vNormal = vec3(uNMatrix * vec4(aVertexNormal, 1.0));     vec4 lightPosition = vec4(0.0);     if (uTranslateLights){         for(int i=0; i < NUM_LIGHTS; i++){           lightPosition =   uMVMatrix * vec4(uLightPosition[i], 1.0);           vLightRay[i] = vertex.xyz - lightPosition.xyz;           vEye[i] = -vec3(vertex.xyz);         }     }     else {        for(int i=0; i < NUM_LIGHTS; i++){          lightPosition = vec4(uLightPosition[i], 1.0);          vLightRay[i] = vertex.xyz - lightPosition.xyz;          vEye[i] = -vec3(vertex.xyz);        }    }    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);}",t.prototype.fragmentContent="#ifdef GL_ESprecision highp float;#endifconst int NUM_LIGHTS = 4;uniform vec3  uLa[NUM_LIGHTS];uniform vec3  uLd[NUM_LIGHTS];uniform vec3  uLs[NUM_LIGHTS];uniform vec3 uLightPosition[NUM_LIGHTS];uniform vec3  uKa;uniform vec3  uKd;uniform vec3  uKs;uniform float uNs;uniform float d;uniform int   illum;uniform bool  uWireframe;varying vec3 vNormal;varying vec3 vLightRay[NUM_LIGHTS];varying vec3 vEye[NUM_LIGHTS];float calculateAttenuation(in vec3 ray){    float dist = length(ray);    return (1.0 / (0.1 * dist));}void main(void) {    if (uWireframe || illum == 0){        gl_FragColor = vec4(uKd,d);        return;    }   vec3 COLOR = vec3(0.0,0.0,0.0);   vec3 N =  normalize(vNormal);   vec3 L =  vec3(0.0,0.0,0.0);   vec3 E =  vec3(0.0,0.0,0.0);   vec3 R =  vec3(0.0,0.0,0.0);   vec3 deltaRay = vec3(0.0);   const int  lsize = 2;   const float step = 0.25;   const float inv_total = 1.0/((float(lsize*lsize) + 1.0)*(float(lsize*lsize) + 1.0));   float dx = 0.0;   float dz = 0.0;   float LT = 0.0;   if (illum == 1){        for(int i = 0; i < NUM_LIGHTS; i++){            L = normalize(vLightRay[i]);            N = normalize(vNormal);            COLOR += (uLa[i] * uKa) + (uLd[i] * uKd * clamp(dot(N, -L),0.0,1.0));        }        gl_FragColor =  vec4(COLOR,d);        return;   }   if (illum == 2){        for(int i = 0; i < NUM_LIGHTS; i++){            E = normalize(vEye[i]);            L = normalize(vLightRay[i]);            R = reflect(L, N);            COLOR += (uLa[i] * uKa);            COLOR += (uLd[i] * uKd * clamp(dot(N,-L),0.0,1.0));            COLOR += (uLs[i] * uKs * pow( max(dot(R, E), 0.0), uNs) * 4.0);        }        gl_FragColor =  vec4(COLOR,d);        return;   }}",t}(),r=e.exports=i},{}],11:[function(t,e,r){"use strict";var i,r,n=t("./Matrix");i=function(){function t(t){this.matrix=t||new n}return t.prototype.scale=function(t,e,r,i,n){return this.matrix.scale(e,r,i,n)},t.prototype.rotate=function(){},t.prototype.translate=function(){},t}(),r=e.exports=i},{"./Matrix":4}],12:[function(t,e,r){"use strict";var i,r;i=function(){function t(t){this.root=t,this.entityMatrix=[]}return t.prototype={getRoot:function(){return this.root},preorder:function(t,e){null!=t&&(e(t),this.preorder(t.firstChild(),e),this.preorder(t.nextSibling(),e))},pushEntity:function(t){this.entityMatrix.push(t)},popEntity:function(){this.entityMatrix.pop()},inorder:function(){},postorder:function(){}},t}(),r=e.exports=i},{}],13:[function(t,e,r){"use strict";var r,i=window.Aubengine||{},n=(t("./Entity"),t("./Shader")),o=t("./Color"),s=t("./Transform"),u=t("./Mesh"),h=t("./Light"),a=t("./Scene"),c=(t("./ResourceManager"),t("./ShadersContent"));i=function(){function t(t,e,r){this.width=t,this.height=e,this.names=["webgl","experimental-webgl","webkit-3d","moz-webgl"],this.canvasId=r,this.gl=null,this.mesh=new u,this.light=new h,this.color=new o,this.transform=new s,this.shader=new n(this.gl),this.scene=new a(this.gl,this.program),this.content=new c,this.vertexShaderContent=this.content.vertexContent,this.fragmentShaderContent=this.content.fragmentContent}return t.prototype.setVertexShaderContent=function(t){this.vertexShaderContent=t},t.prototype.getManager=function(){return this.manager},t.prototype.getGl=function(){return this.gl},t.prototype.setGl=function(t){this.gl=t,this.scene.setGl(t)},t.prototype.setProgram=function(t){this.program=t,this.scene.setProgram(t)},t.prototype.setShaders=function(t,e){var r=document.createElement("script");r.setAttribute("type",e),r.innerHTML=t,document.body.appendChild(r)},t.prototype.startWeb=function(){var t=document.getElementById(this.canvasId);this.gl=t.getContext("webgl"),this.setShaders(this.vertexShaderContent,this.shader.vertexName()),this.setShaders(this.fragmentShaderContent,this.shader.fragmentName())},t.prototype.createBuffer=function(){this.gl.createBuffer()},t.prototype.isStarted=function(){return null==this.gl?!1:!0},t.prototype.clear=function(){this.isStarted()&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height))},t.prototype.changeColor=function(t){this.isStarted()&&(this.gl.clearColor(t[0],t[1],t[2],t[3]),this.clear(this.gl))},t.prototype.scale=function(t,e,r,i,n){this.transform.scale(t,e,r,i,n)},t}(),r=e.exports=i,window.Aubengine=i},{"./Color":1,"./Entity":2,"./Light":3,"./Mesh":5,"./ResourceManager":7,"./Scene":8,"./Shader":9,"./ShadersContent":10,"./Transform":11}],14:[function(t,e,r){"use strict";var i,r;i=function(){function t(t,e){this.name=t,this.data=e||""}return t.prototype.setName=function(t){this.name=t},t.prototype.getName=function(){return this.name},t}(),r=e.exports=i},{}],15:[function(){},{}]},{},[13]);